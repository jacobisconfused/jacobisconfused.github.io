(function(){"use strict";var e={6257:function(e,n,t){var o=t(5130),a=t(6768);const r={id:"app"};function s(e,n,t,o,s,c){const l=(0,a.g2)("CommanderList");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(l)])}var c=t(4232);const l={id:"app"},i={key:0,class:"loading"},d={key:1},u={class:"settings"},m={class:"settings-header"},h={class:"commander-count-wrapper"},f={class:"content"},p={class:"setting"},k={class:"checkbox"},g={class:"checkbox"},y={class:"checkbox"},v={class:"checkbox"},b={class:"checkbox"},C={class:"checkbox"},L={class:"setting"},w={class:"setting"},_={key:0,class:"commanders"},x={class:"commander-img-wrapper"},O=["href"],R=["src"],$={class:"commander-info"},E={class:"commander-info-prices"},U={key:0,class:"commander-info-price"},X={key:1,class:"commander-info-price foil"},I={key:2,class:"commander-info-price etched"},T=["onClick"],j={key:1,class:"generate-image-button-container"},P={ref:"canvas",style:{display:"none"}};function V(e,n,t,r,s,V){return(0,a.uX)(),(0,a.CE)("div",l,[s.loading?((0,a.uX)(),(0,a.CE)("div",i,"Loading...")):((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("div",m,[n[12]||(n[12]=(0,a.Lk)("div",{class:"title"},"Random Commanders",-1)),(0,a.Lk)("div",h,[n[11]||(n[11]=(0,a.Lk)("label",{for:"commander-count"},"#",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":n[0]||(n[0]=e=>s.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[o.Jo,s.commanderCount,void 0,{number:!0}]])])]),(0,a.Lk)("div",f,[(0,a.Lk)("div",p,[n[19]||(n[19]=(0,a.Lk)("div",{class:"title"},"Colors",-1)),(0,a.Lk)("label",k,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>s.selectedColors.u=e)},null,512),[[o.lH,s.selectedColors.u]]),n[13]||(n[13]=(0,a.eW)(" Blue "))]),(0,a.Lk)("label",g,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>s.selectedColors.b=e)},null,512),[[o.lH,s.selectedColors.b]]),n[14]||(n[14]=(0,a.eW)(" Black "))]),(0,a.Lk)("label",y,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>s.selectedColors.w=e)},null,512),[[o.lH,s.selectedColors.w]]),n[15]||(n[15]=(0,a.eW)(" White "))]),(0,a.Lk)("label",v,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>s.selectedColors.r=e)},null,512),[[o.lH,s.selectedColors.r]]),n[16]||(n[16]=(0,a.eW)(" Red "))]),(0,a.Lk)("label",b,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>s.selectedColors.g=e)},null,512),[[o.lH,s.selectedColors.g]]),n[17]||(n[17]=(0,a.eW)(" Green "))]),(0,a.Lk)("label",C,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=e=>s.multicolorOnly=e)},null,512),[[o.lH,s.multicolorOnly]]),n[18]||(n[18]=(0,a.eW)(" Only Multicolor "))])]),(0,a.Lk)("div",L,[n[21]||(n[21]=(0,a.Lk)("div",{class:"title"},"Restriction",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":n[7]||(n[7]=e=>s.restriction=e),class:"input"},n[20]||(n[20]=[(0,a.Lk)("option",{value:"none"},"None",-1),(0,a.Lk)("option",{value:"partners"},"Only Partners",-1),(0,a.Lk)("option",{value:"backgrounds"},"Only Backgrounds",-1)]),512),[[o.u1,s.restriction]])]),(0,a.Lk)("div",w,[n[23]||(n[23]=(0,a.Lk)("div",{class:"title"},"Rarity",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":n[8]||(n[8]=e=>s.selectedRarity=e),class:"input"},n[22]||(n[22]=[(0,a.Lk)("option",{value:"any"},"Any",-1),(0,a.Lk)("option",{value:"u"},"Uncommon",-1),(0,a.Lk)("option",{value:"m"},"Mythic",-1)]),512),[[o.u1,s.selectedRarity]])]),(0,a.Lk)("button",{onClick:n[9]||(n[9]=(...e)=>V.fetchCommanders&&V.fetchCommanders(...e)),class:"btn blue"},"Get Commanders")])]),s.commanders.length>0?((0,a.uX)(),(0,a.CE)("div",_,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.commanders,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"commander-card"},[(0,a.Lk)("div",x,[(0,a.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,a.Lk)("img",{src:V.getImageUrl(e),alt:"commander image",class:"commander-img",crossorigin:"anonymous"},null,8,R)],8,O)]),(0,a.Lk)("div",$,[(0,a.Lk)("h2",null,(0,c.v_)(e.name),1),(0,a.Lk)("div",E,[e.prices.usd?((0,a.uX)(),(0,a.CE)("div",U," $"+(0,c.v_)(e.prices.usd),1)):(0,a.Q3)("",!0),e.prices.usd_foil?((0,a.uX)(),(0,a.CE)("div",X," *$"+(0,c.v_)(e.prices.usd_foil),1)):(0,a.Q3)("",!0),e.prices.usd_etched?((0,a.uX)(),(0,a.CE)("div",I," **$"+(0,c.v_)(e.prices.usd_etched),1)):(0,a.Q3)("",!0)]),e.card_faces&&e.card_faces.length>1&&e.card_faces[0].image_uris?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:n=>V.toggleFace(e),class:"btn green small"}," Transform ",8,T)):(0,a.Q3)("",!0)])])))),128))])):(0,a.Q3)("",!0),s.commanders.length>0?((0,a.uX)(),(0,a.CE)("div",j,[(0,a.Lk)("button",{onClick:n[10]||(n[10]=(...e)=>V.generateImage&&V.generateImage(...e)),class:"btn green"}," Generate Image of Commanders ")])):(0,a.Q3)("",!0)])),(0,a.Lk)("canvas",P,null,512)])}t(4114),t(8992),t(4520),t(1454);var A={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},multicolorOnly:!1,restriction:"none",selectedRarity:"any",lastApiCallTime:0}},methods:{toggleFace(e){e.isTransformed=!e.isTransformed},getQueryFilter(){let e="";const n=Object.entries(this.selectedColors).filter((([e,n])=>n)).map((([e])=>e)).join("");if(n)if(this.multicolorOnly)e=`%20id=${n}`;else{const t=this.selectedColors.c?"":"%20-id=c";e=`%20(id<=${n}${t})`}else this.multicolorOnly&&(e="%20c>1");let t="";"any"!==this.selectedRarity&&(t=`%20rarity:${this.selectedRarity}`);let o="";return"backgrounds"==this.restriction?o='%20o:"Choose a background"':"partners"==this.restriction&&(o="%20o:/^partner$/"),{color:e,rarity:t,full:`${e}${t}${o}`}},async fetchCommanders(){this.loading=!0;try{var e=this.getQueryFilter();const n=[];for(let r=0;r<this.commanderCount;r++){const t=await this.fetchRandomCommander(e.full);n.push(t)}const t=n.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===t){const t=await this.fetchRandomPartner(e.rarity);n.push(t)}const o=n.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length,a="backgrounds"==this.restriction?this.commanderCount:o>0?1:0;if(a>0)for(let r=0;r<a;r++){const t=await this.fetchRandomBackground(e.rarity);n.push(t)}this.commanders=n,this.loading=!1}catch(n){console.error("Error fetching commanders:",n),this.loading=!1}},async ensureDelay(e){const n=Date.now(),t=n-this.lastApiCallTime,o=Math.max(0,e-t);o>0&&await new Promise((e=>setTimeout(e,o))),this.lastApiCallTime=Date.now()},async fetchRandom(e){await this.ensureDelay(100);const n=await fetch(`https://api.scryfall.com/cards/random?q=${e}%20game:paper`),t=await n.json();return t},async fetchRandomCommander(e){return this.fetchRandom(`is:commander%20-t:background${e}`)},async fetchRandomPartner(e){return this.fetchRandom(`o:/^partner$/${e}`)},async fetchRandomBackground(e){return this.fetchRandom(`t:background${e}`)},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isTransformed?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,n=e.getContext("2d"),t=3,o=this.commanders.length,a=Math.ceil(o/t),r=400,s=600;e.width=t*r,e.height=a*s;const c=document.querySelectorAll(".commander-img");let l=0;for(const i of c){await new Promise((e=>{i.complete?e():i.onload=e}));const e=l%t*r,o=Math.floor(l/t)*s;n.drawImage(i,e,o,r,s),l++}this.downloadImage(e)},downloadImage(e){const n=document.createElement("a");n.href=e.toDataURL(),n.download="commanders_image.png",n.click()}}},Q=t(1241);const F=(0,Q.A)(A,[["render",V],["__scopeId","data-v-5125a99d"]]);var W=F,H={name:"App",components:{CommanderList:W}};const M=(0,Q.A)(H,[["render",s]]);var B=M;(0,o.Ef)(B).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,r){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],r=e[d][2];for(var c=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(c=!1,r<s&&(s=r));if(c){e.splice(d--,1);var i=a();void 0!==i&&(n=i)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,a,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,r,s=o[0],c=o[1],l=o[2],i=0;if(s.some((function(n){return 0!==e[n]}))){for(a in c)t.o(c,a)&&(t.m[a]=c[a]);if(l)var d=l(t)}for(n&&n(o);i<s.length;i++)r=s[i],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},o=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(6257)}));o=t.O(o)})();
//# sourceMappingURL=app.5001f75b.js.map