(function(){"use strict";var e={6443:function(e,n,o){var a=o(5130),t=o(6768);const r={id:"app"};function c(e,n,o,a,c,s){const l=(0,t.g2)("CommanderList");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(l)])}var s=o(4232);const l={id:"app"},i={key:0,class:"loading"},d={key:1},m={class:"settings"},u={class:"colors"},h={class:"checkbox"},f={class:"checkbox"},g={class:"checkbox"},p={class:"checkbox"},k={class:"checkbox"},b={class:"checkbox"},v={key:0,class:"commanders"},C=["href"],y=["onMouseover","onMouseleave"],w=["src"],L={class:"commander-info"},_={key:0,class:"background"},x=["src"],U={key:1,class:"generate-image-button-container"},I={ref:"canvas",style:{display:"none"}};function O(e,n,o,r,c,O){return(0,t.uX)(),(0,t.CE)("div",l,[n[17]||(n[17]=(0,t.Lk)("h1",null,"Random Commander Generator",-1)),c.loading?((0,t.uX)(),(0,t.CE)("div",i,"Loading...")):((0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("div",m,[n[15]||(n[15]=(0,t.Lk)("label",{for:"commander-count"},"Number of Commanders:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":n[0]||(n[0]=e=>c.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[a.Jo,c.commanderCount,void 0,{number:!0}]]),(0,t.Lk)("div",u,[(0,t.Lk)("label",h,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>c.selectedColors.u=e)},null,512),[[a.lH,c.selectedColors.u]]),n[9]||(n[9]=(0,t.eW)(" Blue "))]),(0,t.Lk)("label",f,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>c.selectedColors.b=e)},null,512),[[a.lH,c.selectedColors.b]]),n[10]||(n[10]=(0,t.eW)(" Black "))]),(0,t.Lk)("label",g,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>c.selectedColors.w=e)},null,512),[[a.lH,c.selectedColors.w]]),n[11]||(n[11]=(0,t.eW)(" White "))]),(0,t.Lk)("label",p,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>c.selectedColors.r=e)},null,512),[[a.lH,c.selectedColors.r]]),n[12]||(n[12]=(0,t.eW)(" Red "))]),(0,t.Lk)("label",k,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>c.selectedColors.g=e)},null,512),[[a.lH,c.selectedColors.g]]),n[13]||(n[13]=(0,t.eW)(" Green "))]),(0,t.Lk)("label",b,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=e=>c.selectedColors.c=e)},null,512),[[a.lH,c.selectedColors.c]]),n[14]||(n[14]=(0,t.eW)(" Colorless "))])]),(0,t.Lk)("button",{onClick:n[7]||(n[7]=(...e)=>O.fetchCommanders&&O.fetchCommanders(...e)),class:"btn"},"Generate Commanders")]),c.commanders.length>0?((0,t.uX)(),(0,t.CE)("div",v,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(c.commanders,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"commander-card"},[(0,t.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,t.Lk)("div",{class:"commander-img-wrapper",onMouseover:n=>O.onHover(e),onMouseleave:n=>O.onLeave(e)},[(0,t.Lk)("img",{src:O.getImageUrl(e),alt:"commander image",class:"commander-img"},null,8,w)],40,y),(0,t.Lk)("div",L,[(0,t.Lk)("h2",null,(0,s.v_)(e.name),1),(0,t.Lk)("p",null,(0,s.v_)(e.type_line),1)]),e.background?((0,t.uX)(),(0,t.CE)("div",_,[n[16]||(n[16]=(0,t.Lk)("h3",null,"Background:",-1)),(0,t.Lk)("p",null,(0,s.v_)(e.background.name),1),(0,t.Lk)("img",{src:O.getImageUrl(e.background),alt:"background image",class:"commander-img"},null,8,x)])):(0,t.Q3)("",!0)],8,C)])))),128))])):(0,t.Q3)("",!0),c.commanders.length>0?((0,t.uX)(),(0,t.CE)("div",U,[(0,t.Lk)("button",{onClick:n[8]||(n[8]=(...e)=>O.generateImage&&O.generateImage(...e)),class:"generate-image-button"}," Generate Image of Commanders ")])):(0,t.Q3)("",!0)])),(0,t.Lk)("canvas",I,null,512)])}o(4114),o(8992),o(4520),o(1454),o(4603),o(7566),o(8721);var E={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},lastApiCallTime:0}},methods:{onHover(e){e.card_faces&&e.card_faces.length>1&&(e.isHovered=!0)},onLeave(e){e.isHovered=!1},async ensureDelay(e){const n=Date.now(),o=n-this.lastApiCallTime,a=Math.max(0,e-o);a>0&&await new Promise((e=>setTimeout(e,a))),this.lastApiCallTime=Date.now()},async fetchCommanders(){this.loading=!0;try{let e="";const n=Object.entries(this.selectedColors).filter((([e,n])=>n)).map((([e])=>e)).join("");n&&(e=`%20id<=${n}`);const o=[];for(let r=0;r<this.commanderCount;r++){const n=await this.fetchRandomCommander(e);o.push(n)}const a=o.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===a){const e=await this.fetchRandomPartner();o.push(e)}const t=o.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length;if(t>0){const e=await this.fetchRandomBackground();o.push(e)}this.commanders=o,this.loading=!1}catch(e){console.error("Error fetching commanders:",e),this.loading=!1}},async fetchFromUri(e){await this.ensureDelay(75);const n=await fetch(e),o=await n.json();return o},async fetchRandomCommander(e){return this.fetchFromUri(`https://api.scryfall.com/cards/random?q=is:commander%20-t:background%20game:paper${e}`)},async fetchRandomPartner(){return this.fetchFromUri("https://api.scryfall.com/cards/random?q=o:/^partner$/%20game:paper")},async fetchRandomBackground(){return this.fetchFromUri("https://api.scryfall.com/cards/random?q=t:background%20game:paper")},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isHovered?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,n=e.getContext("2d"),o=3,a=this.commanders.length,t=Math.ceil(a/o),r=400,c=600;e.width=o*r,e.height=t*c;let s=0;const l=this.commanders.map((async(t,l)=>{const i=this.getImageUrl(t);let d=new Headers;d.append("Access-Control-Allow-Origin","*");const m=await fetch(i,{headers:d}),u=await m.blob(),h=URL.createObjectURL(u),f=l%o*r,g=Math.floor(l/o)*c,p=new Image;p.src=h,p.onload=()=>{n.drawImage(p,f,g,r,c),s++,s===a&&this.downloadImage(e)}}));await Promise.all(l)},downloadImage(e){const n=document.createElement("a");n.href=e.toDataURL(),n.download="commanders_image.png",n.click()}}},H=o(1241);const R=(0,H.A)(E,[["render",O],["__scopeId","data-v-c33f2368"]]);var j=R,X={name:"App",components:{CommanderList:j}};const A=(0,H.A)(X,[["render",c]]);var M=A;(0,a.Ef)(M).mount("#app")}},n={};function o(a){var t=n[a];if(void 0!==t)return t.exports;var r=n[a]={exports:{}};return e[a].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(n,a,t,r){if(!a){var c=1/0;for(d=0;d<e.length;d++){a=e[d][0],t=e[d][1],r=e[d][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||c>=r)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(s=!1,r<c&&(c=r));if(s){e.splice(d--,1);var i=t();void 0!==i&&(n=i)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,t,r]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var a in n)o.o(n,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};o.O.j=function(n){return 0===e[n]};var n=function(n,a){var t,r,c=a[0],s=a[1],l=a[2],i=0;if(c.some((function(n){return 0!==e[n]}))){for(t in s)o.o(s,t)&&(o.m[t]=s[t]);if(l)var d=l(o)}for(n&&n(a);i<c.length;i++)r=c[i],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},a=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(6443)}));a=o.O(a)})();
//# sourceMappingURL=app.6e4f93a2.js.map