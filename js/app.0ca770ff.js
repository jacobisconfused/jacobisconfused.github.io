(function(){"use strict";var e={8382:function(e,n,t){var a=t(5130),o=t(6768);const r={id:"app"};function s(e,n,t,a,s,c){const l=(0,o.g2)("CommanderList");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(l)])}var c=t(4232);const l={id:"app"},i={key:0,class:"loading"},d={key:1},m={class:"settings"},u={class:"settings-header"},h={class:"commander-count-wrapper"},f={class:"content"},p={class:"setting"},k={class:"checkbox"},g={class:"checkbox"},b={class:"checkbox"},v={class:"checkbox"},y={class:"checkbox"},C={class:"checkbox"},L={class:"setting"},w={key:0,class:"commanders"},_={class:"commander-img-wrapper"},R=["href"],x=["src"],U={class:"commander-info"},E={class:"commander-info-prices"},O={key:0,class:"commander-info-price"},$={key:1,class:"commander-info-price foil"},I={key:2,class:"commander-info-price etched"},j=["onClick"],X={key:1,class:"generate-image-button-container"},T={ref:"canvas",style:{display:"none"}};function P(e,n,t,r,s,P){return(0,o.uX)(),(0,o.CE)("div",l,[s.loading?((0,o.uX)(),(0,o.CE)("div",i,"Loading...")):((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",m,[(0,o.Lk)("div",u,[n[11]||(n[11]=(0,o.Lk)("div",{class:"title"},"Random Commanders",-1)),(0,o.Lk)("div",h,[n[10]||(n[10]=(0,o.Lk)("label",{for:"commander-count"},"#",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":n[0]||(n[0]=e=>s.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[a.Jo,s.commanderCount,void 0,{number:!0}]])])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",p,[n[18]||(n[18]=(0,o.Lk)("div",{class:"title"},"Colors",-1)),(0,o.Lk)("label",k,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>s.selectedColors.u=e)},null,512),[[a.lH,s.selectedColors.u]]),n[12]||(n[12]=(0,o.eW)(" Blue "))]),(0,o.Lk)("label",g,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>s.selectedColors.b=e)},null,512),[[a.lH,s.selectedColors.b]]),n[13]||(n[13]=(0,o.eW)(" Black "))]),(0,o.Lk)("label",b,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>s.selectedColors.w=e)},null,512),[[a.lH,s.selectedColors.w]]),n[14]||(n[14]=(0,o.eW)(" White "))]),(0,o.Lk)("label",v,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>s.selectedColors.r=e)},null,512),[[a.lH,s.selectedColors.r]]),n[15]||(n[15]=(0,o.eW)(" Red "))]),(0,o.Lk)("label",y,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>s.selectedColors.g=e)},null,512),[[a.lH,s.selectedColors.g]]),n[16]||(n[16]=(0,o.eW)(" Green "))]),(0,o.Lk)("label",C,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=e=>s.selectedColors.c=e)},null,512),[[a.lH,s.selectedColors.c]]),n[17]||(n[17]=(0,o.eW)(" Colorless "))])]),(0,o.Lk)("div",L,[n[20]||(n[20]=(0,o.Lk)("div",{class:"title"},"Rarity",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":n[7]||(n[7]=e=>s.selectedRarity=e),class:"input"},n[19]||(n[19]=[(0,o.Lk)("option",{value:"any"},"Any",-1),(0,o.Lk)("option",{value:"u"},"Uncommon",-1),(0,o.Lk)("option",{value:"m"},"Mythic",-1)]),512),[[a.u1,s.selectedRarity]])]),(0,o.Lk)("button",{onClick:n[8]||(n[8]=(...e)=>P.fetchCommanders&&P.fetchCommanders(...e)),class:"btn blue"},"Get Commanders")])]),s.commanders.length>0?((0,o.uX)(),(0,o.CE)("div",w,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.commanders,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"commander-card"},[(0,o.Lk)("div",_,[(0,o.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,o.Lk)("img",{src:P.getImageUrl(e),alt:"commander image",class:"commander-img"},null,8,x)],8,R)]),(0,o.Lk)("div",U,[(0,o.Lk)("h2",null,(0,c.v_)(e.name),1),(0,o.Lk)("div",E,[e.prices.usd?((0,o.uX)(),(0,o.CE)("div",O," $"+(0,c.v_)(e.prices.usd),1)):(0,o.Q3)("",!0),e.prices.usd_foil?((0,o.uX)(),(0,o.CE)("div",$," *$"+(0,c.v_)(e.prices.usd_foil),1)):(0,o.Q3)("",!0),e.prices.usd_etched?((0,o.uX)(),(0,o.CE)("div",I," **$"+(0,c.v_)(e.prices.usd_etched),1)):(0,o.Q3)("",!0)]),e.card_faces&&e.card_faces.length>1&&e.card_faces[0].image_uris?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:n=>P.toggleFace(e),class:"btn green small"}," Transform ",8,j)):(0,o.Q3)("",!0)])])))),128))])):(0,o.Q3)("",!0),s.commanders.length>0?((0,o.uX)(),(0,o.CE)("div",X,[(0,o.Lk)("button",{onClick:n[9]||(n[9]=(...e)=>P.generateImage&&P.generateImage(...e)),class:"btn green"}," Generate Image of Commanders ")])):(0,o.Q3)("",!0)])),(0,o.Lk)("canvas",T,null,512)])}t(4114),t(8992),t(4520),t(1454),t(4603),t(7566),t(8721);var V={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},selectedRarity:"any",lastApiCallTime:0}},methods:{toggleFace(e){e.isTransformed=!e.isTransformed},getQueryFilter(){},async fetchCommanders(){this.loading=!0;try{let e="";const n=Object.entries(this.selectedColors).filter((([e,n])=>n)).map((([e])=>e)).join("");if(n){const t=this.selectedColors.c?"":"%20-id=c";e=`%20(id<=${n}${t})`}let t="";"any"!==this.selectedRarity&&(t=`%20rarity:${this.selectedRarity}`);const a=`${e}${t}`,o=[];for(let c=0;c<this.commanderCount;c++){const e=await this.fetchRandomCommander(a);o.push(e)}const r=o.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===r){const e=await this.fetchRandomPartner(t);o.push(e)}const s=o.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length;if(s>0){const e=await this.fetchRandomBackground(t);o.push(e)}this.commanders=o,this.loading=!1}catch(e){console.error("Error fetching commanders:",e),this.loading=!1}},async ensureDelay(e){const n=Date.now(),t=n-this.lastApiCallTime,a=Math.max(0,e-t);a>0&&await new Promise((e=>setTimeout(e,a))),this.lastApiCallTime=Date.now()},async fetchRandom(e){await this.ensureDelay(100);const n=await fetch(`https://api.scryfall.com/cards/random?q=${e}%20game:paper`),t=await n.json();return t},async fetchRandomCommander(e){return this.fetchRandom(`is:commander%20-t:background${e}`)},async fetchRandomPartner(e){return this.fetchRandom(`o:/^partner$/${e}`)},async fetchRandomBackground(e){return this.fetchRandom(`t:background${e}`)},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isTransformed?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,n=e.getContext("2d"),t=3,a=this.commanders.length,o=Math.ceil(a/t),r=400,s=600;e.width=t*r,e.height=o*s;let c=0;const l=this.commanders.map((async(o,l)=>{const i=this.getImageUrl(o),d=await fetch(i),m=await d.blob(),u=URL.createObjectURL(m),h=l%t*r,f=Math.floor(l/t)*s,p=new Image;p.crossOrigin="anonymous",p.src=u,p.onload=()=>{n.drawImage(p,h,f,r,s),c++,c===a&&this.downloadImage(e)}}));await Promise.all(l)},downloadImage(e){e.toBlob((e=>{const n=document.createElement("a"),t=URL.createObjectURL(e);n.href=t,n.download="commanders_image.png",n.click(),URL.revokeObjectURL(t)}),"image/png")}}},A=t(1241);const Q=(0,A.A)(V,[["render",P],["__scopeId","data-v-4f306c1e"]]);var W=Q,F={name:"App",components:{CommanderList:W}};const H=(0,A.A)(F,[["render",s]]);var B=H;(0,a.Ef)(B).mount("#app")}},n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return e[a].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,a,o,r){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var c=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](a[l])}))?a.splice(l--,1):(c=!1,r<s&&(s=r));if(c){e.splice(d--,1);var i=o();void 0!==i&&(n=i)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var o,r,s=a[0],c=a[1],l=a[2],i=0;if(s.some((function(n){return 0!==e[n]}))){for(o in c)t.o(c,o)&&(t.m[o]=c[o]);if(l)var d=l(t)}for(n&&n(a);i<s.length;i++)r=s[i],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},a=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(8382)}));a=t.O(a)})();
//# sourceMappingURL=app.0ca770ff.js.map