(function(){"use strict";var e={8607:function(e,t,n){var o=n(5130),s=n(6768);const a={id:"app"};function r(e,t,n,o,r,i){const c=(0,s.g2)("CommanderList");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(c)])}var i=n(4232);const c={id:"app"},l={key:0,class:"loading"},d={key:1},u={class:"settings"},m={class:"settings-header"},h={class:"commander-count-wrapper"},g={class:"content"},f={class:"setting"},k={class:"checkbox"},p={class:"checkbox"},b={class:"checkbox"},y={class:"checkbox"},v={class:"checkbox"},C={class:"checkbox"},L={class:"setting"},w={class:"setting"},_={class:"settings-footer"},x={key:0},O={key:1},R={key:0,class:"commanders"},E={class:"commander-img-wrapper"},$=["href"],V=["src"],X={class:"commander-info"},U={class:"commander-info-prices"},I={key:0,class:"commander-info-price"},T={key:1,class:"commander-info-price foil"},j={key:2,class:"commander-info-price etched"},P=["onClick"],A={key:1,class:"generate-image-button-container"},Q={ref:"canvas",style:{display:"none"}};function F(e,t,n,a,r,F){return(0,s.uX)(),(0,s.CE)("div",c,[r.loading?((0,s.uX)(),(0,s.CE)("div",l,"Loading...")):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[t[13]||(t[13]=(0,s.Lk)("div",{class:"title"},"Random Commanders",-1)),(0,s.Lk)("div",h,[t[12]||(t[12]=(0,s.Lk)("label",{for:"commander-count"},"#",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":t[0]||(t[0]=e=>r.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[o.Jo,r.commanderCount,void 0,{number:!0}]])])]),(0,s.bo)((0,s.Lk)("div",g,[(0,s.Lk)("div",f,[t[20]||(t[20]=(0,s.Lk)("div",{class:"title"},"Colors",-1)),(0,s.Lk)("label",k,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>r.selectedColors.u=e)},null,512),[[o.lH,r.selectedColors.u]]),t[14]||(t[14]=(0,s.eW)(" Blue "))]),(0,s.Lk)("label",p,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>r.selectedColors.b=e)},null,512),[[o.lH,r.selectedColors.b]]),t[15]||(t[15]=(0,s.eW)(" Black "))]),(0,s.Lk)("label",b,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>r.selectedColors.w=e)},null,512),[[o.lH,r.selectedColors.w]]),t[16]||(t[16]=(0,s.eW)(" White "))]),(0,s.Lk)("label",y,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>r.selectedColors.r=e)},null,512),[[o.lH,r.selectedColors.r]]),t[17]||(t[17]=(0,s.eW)(" Red "))]),(0,s.Lk)("label",v,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>r.selectedColors.g=e)},null,512),[[o.lH,r.selectedColors.g]]),t[18]||(t[18]=(0,s.eW)(" Green "))]),(0,s.Lk)("label",C,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>r.multicolorOnly=e)},null,512),[[o.lH,r.multicolorOnly]]),t[19]||(t[19]=(0,s.eW)(" Only Multicolor "))])]),(0,s.Lk)("div",L,[t[22]||(t[22]=(0,s.Lk)("div",{class:"title"},"Restriction",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.restriction=e),class:"input"},t[21]||(t[21]=[(0,s.Lk)("option",{value:"none"},"None",-1),(0,s.Lk)("option",{value:"partners"},"Only Partners",-1),(0,s.Lk)("option",{value:"backgrounds"},"Only Backgrounds",-1)]),512),[[o.u1,r.restriction]])]),(0,s.Lk)("div",w,[t[24]||(t[24]=(0,s.Lk)("div",{class:"title"},"Rarity",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.selectedRarity=e),class:"input"},t[23]||(t[23]=[(0,s.Lk)("option",{value:"any"},"Any",-1),(0,s.Lk)("option",{value:"u"},"Uncommon",-1),(0,s.Lk)("option",{value:"m"},"Mythic",-1)]),512),[[o.u1,r.selectedRarity]])])],512),[[o.aG,r.settingsVisible]]),(0,s.Lk)("div",_,[(0,s.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>F.fetchCommanders&&F.fetchCommanders(...e)),class:"btn blue"},"Get Commanders"),(0,s.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>F.toggleSettings&&F.toggleSettings(...e)),class:"btn toggle"},[r.settingsVisible?((0,s.uX)(),(0,s.CE)("span",x,"▲ Hide Settings")):((0,s.uX)(),(0,s.CE)("span",O,"▼ Show Settings"))])])]),r.commanders.length>0?((0,s.uX)(),(0,s.CE)("div",R,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.commanders,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"commander-card"},[(0,s.Lk)("div",E,[(0,s.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,s.Lk)("img",{src:F.getImageUrl(e),alt:"commander image",class:"commander-img",crossorigin:"anonymous"},null,8,V)],8,$)]),(0,s.Lk)("div",X,[(0,s.Lk)("h2",null,(0,i.v_)(e.name),1),(0,s.Lk)("div",U,[e.prices.usd?((0,s.uX)(),(0,s.CE)("div",I," $"+(0,i.v_)(e.prices.usd),1)):(0,s.Q3)("",!0),e.prices.usd_foil?((0,s.uX)(),(0,s.CE)("div",T," *$"+(0,i.v_)(e.prices.usd_foil),1)):(0,s.Q3)("",!0),e.prices.usd_etched?((0,s.uX)(),(0,s.CE)("div",j," **$"+(0,i.v_)(e.prices.usd_etched),1)):(0,s.Q3)("",!0)]),e.card_faces&&e.card_faces.length>1&&e.card_faces[0].image_uris?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>F.toggleFace(e),class:"btn green small"}," Transform ",8,P)):(0,s.Q3)("",!0)])])))),128))])):(0,s.Q3)("",!0),r.commanders.length>0?((0,s.uX)(),(0,s.CE)("div",A,[(0,s.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>F.generateImage&&F.generateImage(...e)),class:"btn green"}," Generate Image of Commanders ")])):(0,s.Q3)("",!0)])),(0,s.Lk)("canvas",Q,null,512)])}n(4114),n(8992),n(4520),n(1454);var H={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},multicolorOnly:!1,restriction:"none",selectedRarity:"any",lastApiCallTime:0,settingsVisible:!1}},methods:{toggleSettings(){this.settingsVisible=!this.settingsVisible},toggleFace(e){e.isTransformed=!e.isTransformed},getQueryFilter(){let e="";const t=Object.entries(this.selectedColors).filter((([e,t])=>t)).map((([e])=>e)).join("");if(t)if(this.multicolorOnly)e=`%20id=${t}`;else{const n=this.selectedColors.c?"":"%20-id=c";e=`%20(id<=${t}${n})`}else this.multicolorOnly&&(e="%20c>1");let n="";"any"!==this.selectedRarity&&(n=`%20rarity:${this.selectedRarity}`);let o="";return"backgrounds"==this.restriction?o='%20o:"Choose a background"':"partners"==this.restriction&&(o="%20o:/^partner$/"),{color:e,rarity:n,full:`${e}${n}${o}`}},async fetchCommanders(){this.loading=!0,this.settingsVisible&&(this.settingsVisible=!1);try{var e=this.getQueryFilter();const t=[];for(let a=0;a<this.commanderCount;a++){const n=await this.fetchRandomCommander(e.full);t.push(n)}const n=t.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===n){const n=await this.fetchRandomPartner(e.rarity);t.push(n)}const o=t.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length,s="backgrounds"==this.restriction?this.commanderCount:o>0?1:0;if(s>0)for(let a=0;a<s;a++){const n=await this.fetchRandomBackground(e.rarity);t.push(n)}this.commanders=t,this.loading=!1}catch(t){console.error("Error fetching commanders:",t),this.loading=!1}},async ensureDelay(e){const t=Date.now(),n=t-this.lastApiCallTime,o=Math.max(0,e-n);o>0&&await new Promise((e=>setTimeout(e,o))),this.lastApiCallTime=Date.now()},async fetchRandom(e){await this.ensureDelay(100);const t=await fetch(`https://api.scryfall.com/cards/random?q=${e}%20game:paper`),n=await t.json();return n},async fetchRandomCommander(e){return this.fetchRandom(`is:commander%20-t:background${e}`)},async fetchRandomPartner(e){return this.fetchRandom(`o:/^partner$/${e}`)},async fetchRandomBackground(e){return this.fetchRandom(`t:background${e}`)},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isTransformed?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,t=e.getContext("2d"),n=3,o=this.commanders.length,s=Math.ceil(o/n),a=400,r=600;e.width=n*a,e.height=s*r;const i=document.querySelectorAll(".commander-img");let c=0;for(const l of i){await new Promise((e=>{l.complete?e():l.onload=e}));const e=c%n*a,o=Math.floor(c/n)*r;t.drawImage(l,e,o,a,r),c++}this.downloadImage(e)},downloadImage(e){const t=document.createElement("a");t.href=e.toDataURL(),t.download="commanders_image.png",t.click()}}},S=n(1241);const W=(0,S.A)(H,[["render",F],["__scopeId","data-v-94ea2fc8"]]);var M=W,B={name:"App",components:{CommanderList:M}};const D=(0,S.A)(B,[["render",r]]);var G=D;(0,o.Ef)(G).mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],a=e[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],c=o[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(c)var d=c(n)}for(t&&t(o);l<r.length;l++)a=r[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(8607)}));o=n.O(o)})();
//# sourceMappingURL=app.2ab9dbeb.js.map