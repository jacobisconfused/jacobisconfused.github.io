(function(){"use strict";var e={5783:function(e,n,o){var a=o(5130),r=o(6768);const t={id:"app"};function c(e,n,o,a,c,s){const l=(0,r.g2)("CommanderList");return(0,r.uX)(),(0,r.CE)("div",t,[(0,r.bF)(l)])}var s=o(4232);const l={id:"app"},i={key:0,class:"loading"},d={key:1},m={class:"settings"},u={class:"colors"},h={class:"checkbox"},f={class:"checkbox"},p={class:"checkbox"},g={class:"checkbox"},k={class:"checkbox"},b={class:"checkbox"},v={key:0,class:"commanders"},C=["href"],y=["onMouseover","onMouseleave"],w=["src"],L={class:"commander-info"},_={key:0,class:"background"},x=["src"],U={key:1,class:"generate-image-button-container"},E={ref:"canvas",style:{display:"none"}};function O(e,n,o,t,c,O){return(0,r.uX)(),(0,r.CE)("div",l,[n[17]||(n[17]=(0,r.Lk)("h1",null,"Random Commander Generator",-1)),c.loading?((0,r.uX)(),(0,r.CE)("div",i,"Loading...")):((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",m,[n[15]||(n[15]=(0,r.Lk)("label",{for:"commander-count"},"Number of Commanders:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":n[0]||(n[0]=e=>c.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[a.Jo,c.commanderCount,void 0,{number:!0}]]),(0,r.Lk)("div",u,[(0,r.Lk)("label",h,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>c.selectedColors.u=e)},null,512),[[a.lH,c.selectedColors.u]]),n[9]||(n[9]=(0,r.eW)(" Blue "))]),(0,r.Lk)("label",f,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>c.selectedColors.b=e)},null,512),[[a.lH,c.selectedColors.b]]),n[10]||(n[10]=(0,r.eW)(" Black "))]),(0,r.Lk)("label",p,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>c.selectedColors.w=e)},null,512),[[a.lH,c.selectedColors.w]]),n[11]||(n[11]=(0,r.eW)(" White "))]),(0,r.Lk)("label",g,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>c.selectedColors.r=e)},null,512),[[a.lH,c.selectedColors.r]]),n[12]||(n[12]=(0,r.eW)(" Red "))]),(0,r.Lk)("label",k,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>c.selectedColors.g=e)},null,512),[[a.lH,c.selectedColors.g]]),n[13]||(n[13]=(0,r.eW)(" Green "))]),(0,r.Lk)("label",b,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=e=>c.selectedColors.c=e)},null,512),[[a.lH,c.selectedColors.c]]),n[14]||(n[14]=(0,r.eW)(" Colorless "))])]),(0,r.Lk)("button",{onClick:n[7]||(n[7]=(...e)=>O.fetchCommanders&&O.fetchCommanders(...e)),class:"btn"},"Generate Commanders")]),c.commanders.length>0?((0,r.uX)(),(0,r.CE)("div",v,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.commanders,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"commander-card"},[(0,r.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,r.Lk)("div",{class:"commander-img-wrapper",onMouseover:n=>O.onHover(e),onMouseleave:n=>O.onLeave(e)},[(0,r.Lk)("img",{src:O.getImageUrl(e),alt:"commander image",class:"commander-img"},null,8,w)],40,y),(0,r.Lk)("div",L,[(0,r.Lk)("h2",null,(0,s.v_)(e.name),1),(0,r.Lk)("p",null,(0,s.v_)(e.type_line),1)]),e.background?((0,r.uX)(),(0,r.CE)("div",_,[n[16]||(n[16]=(0,r.Lk)("h3",null,"Background:",-1)),(0,r.Lk)("p",null,(0,s.v_)(e.background.name),1),(0,r.Lk)("img",{src:O.getImageUrl(e.background),alt:"background image",class:"commander-img"},null,8,x)])):(0,r.Q3)("",!0)],8,C)])))),128))])):(0,r.Q3)("",!0),c.commanders.length>0?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("button",{onClick:n[8]||(n[8]=(...e)=>O.generateImage&&O.generateImage(...e)),class:"generate-image-button"}," Generate Image of Commanders ")])):(0,r.Q3)("",!0)])),(0,r.Lk)("canvas",E,null,512)])}o(4114),o(8992),o(4520),o(1454);var I={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},lastApiCallTime:0}},methods:{onHover(e){e.card_faces&&e.card_faces.length>1&&(e.isHovered=!0)},onLeave(e){e.isHovered=!1},async ensureDelay(e){const n=Date.now(),o=n-this.lastApiCallTime,a=Math.max(0,e-o);a>0&&await new Promise((e=>setTimeout(e,a))),this.lastApiCallTime=Date.now()},async fetchCommanders(){this.loading=!0;try{let e="";const n=Object.entries(this.selectedColors).filter((([e,n])=>n)).map((([e])=>e)).join("");n&&(e=`%20id<=${n}`);const o=[];for(let t=0;t<this.commanderCount;t++){const n=await this.fetchRandomCommander(e);o.push(n)}const a=o.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===a){const e=await this.fetchRandomPartner();o.push(e)}const r=o.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length;if(r>0){const e=await this.fetchRandomBackground();o.push(e)}this.commanders=o,this.loading=!1}catch(e){console.error("Error fetching commanders:",e),this.loading=!1}},async fetchFromUri(e){await this.ensureDelay(75);const n=await fetch(e),o=await n.json();return o},async fetchRandomCommander(e){return this.fetchFromUri(`https://api.scryfall.com/cards/random?q=is:commander%20-t:background%20game:paper${e}`)},async fetchRandomPartner(){return this.fetchFromUri("https://api.scryfall.com/cards/random?q=o:/^partner$/%20game:paper")},async fetchRandomBackground(){return this.fetchFromUri("https://api.scryfall.com/cards/random?q=t:background%20game:paper")},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isHovered?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,n=e.getContext("2d"),o=3,a=this.commanders.length,r=Math.ceil(a/o),t=400,c=600;e.width=o*t,e.height=r*c;const s=this.$el.querySelectorAll(".commander-img"),l=Array.from(s).map(((e,a)=>{const r=a%o*t,s=Math.floor(a/o)*c;e.crossOrigin="Anonymous";const l=new Promise((n=>{e.complete?n():e.onload=()=>n()}));return l.then((()=>{n.drawImage(e,r,s,t,c)})),l}));await Promise.all(l),this.downloadImage(e)},downloadImage(e){const n=document.createElement("a");n.href=e.toDataURL(),n.download="commanders_image.png",n.click()}}},H=o(1241);const j=(0,H.A)(I,[["render",O],["__scopeId","data-v-075fa3b2"]]);var A=j,P={name:"App",components:{CommanderList:A}};const R=(0,H.A)(P,[["render",c]]);var X=R;(0,a.Ef)(X).mount("#app")}},n={};function o(a){var r=n[a];if(void 0!==r)return r.exports;var t=n[a]={exports:{}};return e[a].call(t.exports,t,t.exports,o),t.exports}o.m=e,function(){var e=[];o.O=function(n,a,r,t){if(!a){var c=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],t=e[d][2];for(var s=!0,l=0;l<a.length;l++)(!1&t||c>=t)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(s=!1,t<c&&(c=t));if(s){e.splice(d--,1);var i=r();void 0!==i&&(n=i)}}return n}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[a,r,t]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var a in n)o.o(n,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};o.O.j=function(n){return 0===e[n]};var n=function(n,a){var r,t,c=a[0],s=a[1],l=a[2],i=0;if(c.some((function(n){return 0!==e[n]}))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var d=l(o)}for(n&&n(a);i<c.length;i++)t=c[i],o.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return o.O(d)},a=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(5783)}));a=o.O(a)})();
//# sourceMappingURL=app.9092dc84.js.map