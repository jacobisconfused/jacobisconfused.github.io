(function(){"use strict";var e={8300:function(e,o,n){var a=n(5130),r=n(6768);const t={id:"app"};function c(e,o,n,a,c,s){const l=(0,r.g2)("CommanderList");return(0,r.uX)(),(0,r.CE)("div",t,[(0,r.bF)(l)])}var s=n(4232);const l={id:"app"},i={key:0,class:"loading"},d={key:1},m={class:"settings"},u={class:"colors"},h={class:"checkbox"},f={class:"checkbox"},g={class:"checkbox"},p={class:"checkbox"},k={class:"checkbox"},b={class:"checkbox"},v={key:0,class:"commanders"},C=["href"],y=["onMouseover","onMouseleave"],w=["src"],L={class:"commander-info"},_={key:0,class:"background"},x=["src"],U={key:1,class:"generate-image-button-container"},E={ref:"canvas"};function O(e,o,n,t,c,O){return(0,r.uX)(),(0,r.CE)("div",l,[o[17]||(o[17]=(0,r.Lk)("h1",null,"Random Commander Generator",-1)),c.loading?((0,r.uX)(),(0,r.CE)("div",i,"Loading...")):((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",m,[o[15]||(o[15]=(0,r.Lk)("label",{for:"commander-count"},"Number of Commanders:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":o[0]||(o[0]=e=>c.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[a.Jo,c.commanderCount,void 0,{number:!0}]]),(0,r.Lk)("div",u,[(0,r.Lk)("label",h,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=e=>c.selectedColors.u=e)},null,512),[[a.lH,c.selectedColors.u]]),o[9]||(o[9]=(0,r.eW)(" Blue "))]),(0,r.Lk)("label",f,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=e=>c.selectedColors.b=e)},null,512),[[a.lH,c.selectedColors.b]]),o[10]||(o[10]=(0,r.eW)(" Black "))]),(0,r.Lk)("label",g,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=e=>c.selectedColors.w=e)},null,512),[[a.lH,c.selectedColors.w]]),o[11]||(o[11]=(0,r.eW)(" White "))]),(0,r.Lk)("label",p,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=e=>c.selectedColors.r=e)},null,512),[[a.lH,c.selectedColors.r]]),o[12]||(o[12]=(0,r.eW)(" Red "))]),(0,r.Lk)("label",k,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=e=>c.selectedColors.g=e)},null,512),[[a.lH,c.selectedColors.g]]),o[13]||(o[13]=(0,r.eW)(" Green "))]),(0,r.Lk)("label",b,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=e=>c.selectedColors.c=e)},null,512),[[a.lH,c.selectedColors.c]]),o[14]||(o[14]=(0,r.eW)(" Colorless "))])]),(0,r.Lk)("button",{onClick:o[7]||(o[7]=(...e)=>O.fetchCommanders&&O.fetchCommanders(...e)),class:"btn"},"Generate Commanders")]),c.commanders.length>0?((0,r.uX)(),(0,r.CE)("div",v,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.commanders,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"commander-card"},[(0,r.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,r.Lk)("div",{class:"commander-img-wrapper",onMouseover:o=>O.onHover(e),onMouseleave:o=>O.onLeave(e)},[(0,r.Lk)("img",{src:O.getImageUrl(e),alt:"commander image",class:"commander-img"},null,8,w)],40,y),(0,r.Lk)("div",L,[(0,r.Lk)("h2",null,(0,s.v_)(e.name),1),(0,r.Lk)("p",null,(0,s.v_)(e.type_line),1)]),e.background?((0,r.uX)(),(0,r.CE)("div",_,[o[16]||(o[16]=(0,r.Lk)("h3",null,"Background:",-1)),(0,r.Lk)("p",null,(0,s.v_)(e.background.name),1),(0,r.Lk)("img",{src:O.getImageUrl(e.background),alt:"background image",class:"commander-img"},null,8,x)])):(0,r.Q3)("",!0)],8,C)])))),128))])):(0,r.Q3)("",!0),c.commanders.length>0?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("button",{onClick:o[8]||(o[8]=(...e)=>O.generateImage&&O.generateImage(...e)),class:"generate-image-button"}," Generate Image of Commanders ")])):(0,r.Q3)("",!0)])),(0,r.Lk)("canvas",E,null,512)])}n(4114),n(8992),n(4520),n(1454);var I={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},lastApiCallTime:0}},methods:{onHover(e){e.card_faces&&e.card_faces.length>1&&(e.isHovered=!0)},onLeave(e){e.isHovered=!1},async ensureDelay(e){const o=Date.now(),n=o-this.lastApiCallTime,a=Math.max(0,e-n);a>0&&await new Promise((e=>setTimeout(e,a))),this.lastApiCallTime=Date.now()},async fetchCommanders(){this.loading=!0;try{let e="";const o=Object.entries(this.selectedColors).filter((([e,o])=>o)).map((([e])=>e)).join("");o&&(e=`%20id<=${o}`);const n=[];for(let t=0;t<this.commanderCount;t++){const o=await this.fetchRandomCommander(e);n.push(o)}const a=n.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===a){const e=await this.fetchRandomPartner();n.push(e)}const r=n.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length;if(r>0){const e=await this.fetchRandomBackground();n.push(e)}this.commanders=n,this.loading=!1}catch(e){console.error("Error fetching commanders:",e),this.loading=!1}},async fetchFromUri(e){await this.ensureDelay(75);const o=await fetch(e),n=await o.json();return n},async fetchRandomCommander(e){return this.fetchFromUri(`https://api.scryfall.com/cards/random?q=is:commander%20-t:background%20game:paper${e}`)},async fetchRandomPartner(){return this.fetchFromUri("https://api.scryfall.com/cards/random?q=o:/^partner$/%20game:paper")},async fetchRandomBackground(){return this.fetchFromUri("https://api.scryfall.com/cards/random?q=t:background%20game:paper")},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isHovered?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,o=e.getContext("2d"),n=3,a=this.commanders.length,r=Math.ceil(a/n),t=400,c=600;e.width=n*t,e.height=r*c;const s=this.$el.querySelectorAll(".commander-img"),l=Array.from(s).map(((e,a)=>new Promise(((r,s)=>{const l=a%n*t,i=Math.floor(a/n)*c;e.crossOrigin="Anonymous",e.complete?(o.drawImage(e,l,i,t,c),r()):(e.onload=()=>{o.drawImage(e,l,i,t,c),r()},e.onerror=e=>{console.error("Error loading image:",e),s(e)})}))));await Promise.all(l)},downloadImage(e){const o=document.createElement("a");o.href=e.toDataURL(),o.download="commanders_image.png",o.click()}}},H=n(1241);const j=(0,H.A)(I,[["render",O],["__scopeId","data-v-4046bad0"]]);var A=j,P={name:"App",components:{CommanderList:A}};const R=(0,H.A)(P,[["render",c]]);var X=R;(0,a.Ef)(X).mount("#app")}},o={};function n(a){var r=o[a];if(void 0!==r)return r.exports;var t=o[a]={exports:{}};return e[a].call(t.exports,t,t.exports,n),t.exports}n.m=e,function(){var e=[];n.O=function(o,a,r,t){if(!a){var c=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],t=e[d][2];for(var s=!0,l=0;l<a.length;l++)(!1&t||c>=t)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(s=!1,t<c&&(c=t));if(s){e.splice(d--,1);var i=r();void 0!==i&&(o=i)}}return o}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[a,r,t]}}(),function(){n.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(o,{a:o}),o}}(),function(){n.d=function(e,o){for(var a in o)n.o(o,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={524:0};n.O.j=function(o){return 0===e[o]};var o=function(o,a){var r,t,c=a[0],s=a[1],l=a[2],i=0;if(c.some((function(o){return 0!==e[o]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var d=l(n)}for(o&&o(a);i<c.length;i++)t=c[i],n.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return n.O(d)},a=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(8300)}));a=n.O(a)})();
//# sourceMappingURL=app.8abe8df9.js.map