(function(){"use strict";var e={8467:function(e,n,o){var t=o(5130),a=o(6768);const r={id:"app"};function s(e,n,o,t,s,c){const l=(0,a.g2)("CommanderList");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(l)])}var c=o(4232);const l={id:"app"},i={key:0,class:"loading"},d={key:1},m={class:"settings"},u={class:"settings-header"},f={class:"commander-count-wrapper"},h={class:"content"},p={class:"setting"},k={class:"checkbox"},g={class:"checkbox"},b={class:"checkbox"},v={class:"checkbox"},y={class:"checkbox"},C={class:"checkbox"},L={class:"setting"},w={key:0,class:"commanders"},_={class:"commander-img-wrapper"},x=["href"],R=["src"],E={class:"commander-info"},$={class:"commander-info-prices"},O={key:0,class:"commander-info-price"},U={key:1,class:"commander-info-price foil"},X={key:2,class:"commander-info-price etched"},I=["onClick"],T={key:1,class:"generate-image-button-container"},j={ref:"canvas",style:{display:"none"}};function A(e,n,o,r,s,A){return(0,a.uX)(),(0,a.CE)("div",l,[s.loading?((0,a.uX)(),(0,a.CE)("div",i,"Loading...")):((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",m,[(0,a.Lk)("div",u,[n[11]||(n[11]=(0,a.Lk)("div",{class:"title"},"Random Commanders",-1)),(0,a.Lk)("div",f,[n[10]||(n[10]=(0,a.Lk)("label",{for:"commander-count"},"#",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"commander-count","onUpdate:modelValue":n[0]||(n[0]=e=>s.commanderCount=e),min:"1",max:"10",class:"input"},null,512),[[t.Jo,s.commanderCount,void 0,{number:!0}]])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",p,[n[18]||(n[18]=(0,a.Lk)("div",{class:"title"},"Colors",-1)),(0,a.Lk)("label",k,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>s.selectedColors.u=e)},null,512),[[t.lH,s.selectedColors.u]]),n[12]||(n[12]=(0,a.eW)(" Blue "))]),(0,a.Lk)("label",g,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>s.selectedColors.b=e)},null,512),[[t.lH,s.selectedColors.b]]),n[13]||(n[13]=(0,a.eW)(" Black "))]),(0,a.Lk)("label",b,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>s.selectedColors.w=e)},null,512),[[t.lH,s.selectedColors.w]]),n[14]||(n[14]=(0,a.eW)(" White "))]),(0,a.Lk)("label",v,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>s.selectedColors.r=e)},null,512),[[t.lH,s.selectedColors.r]]),n[15]||(n[15]=(0,a.eW)(" Red "))]),(0,a.Lk)("label",y,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>s.selectedColors.g=e)},null,512),[[t.lH,s.selectedColors.g]]),n[16]||(n[16]=(0,a.eW)(" Green "))]),(0,a.Lk)("label",C,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=e=>s.selectedColors.c=e)},null,512),[[t.lH,s.selectedColors.c]]),n[17]||(n[17]=(0,a.eW)(" Colorless "))])]),(0,a.Lk)("div",L,[n[20]||(n[20]=(0,a.Lk)("div",{class:"title"},"Rarity",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":n[7]||(n[7]=e=>s.selectedRarity=e),class:"input"},n[19]||(n[19]=[(0,a.Lk)("option",{value:"any"},"Any",-1),(0,a.Lk)("option",{value:"u"},"Uncommon",-1),(0,a.Lk)("option",{value:"m"},"Mythic",-1)]),512),[[t.u1,s.selectedRarity]])]),(0,a.Lk)("button",{onClick:n[8]||(n[8]=(...e)=>A.fetchCommanders&&A.fetchCommanders(...e)),class:"btn blue"},"Get Commanders")])]),s.commanders.length>0?((0,a.uX)(),(0,a.CE)("div",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.commanders,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"commander-card"},[(0,a.Lk)("div",_,[(0,a.Lk)("a",{href:e.scryfall_uri,target:"_blank",class:"commander-link"},[(0,a.Lk)("img",{src:A.getImageUrl(e),alt:"commander image",class:"commander-img",crossorigin:"anonymous"},null,8,R)],8,x)]),(0,a.Lk)("div",E,[(0,a.Lk)("h2",null,(0,c.v_)(e.name),1),(0,a.Lk)("div",$,[e.prices.usd?((0,a.uX)(),(0,a.CE)("div",O," $"+(0,c.v_)(e.prices.usd),1)):(0,a.Q3)("",!0),e.prices.usd_foil?((0,a.uX)(),(0,a.CE)("div",U," *$"+(0,c.v_)(e.prices.usd_foil),1)):(0,a.Q3)("",!0),e.prices.usd_etched?((0,a.uX)(),(0,a.CE)("div",X," **$"+(0,c.v_)(e.prices.usd_etched),1)):(0,a.Q3)("",!0)]),e.card_faces&&e.card_faces.length>1&&e.card_faces[0].image_uris?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:n=>A.toggleFace(e),class:"btn green small"}," Transform ",8,I)):(0,a.Q3)("",!0)])])))),128))])):(0,a.Q3)("",!0),s.commanders.length>0?((0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("button",{onClick:n[9]||(n[9]=(...e)=>A.generateImage&&A.generateImage(...e)),class:"btn green"}," Generate Image of Commanders ")])):(0,a.Q3)("",!0)])),(0,a.Lk)("canvas",j,null,512)])}o(4114),o(8992),o(4520),o(1454);var P={data(){return{commanders:[],loading:!1,commanderCount:5,selectedColors:{u:!1,b:!1,w:!1,r:!1,g:!1,c:!1},selectedRarity:"any",lastApiCallTime:0}},methods:{toggleFace(e){e.isTransformed=!e.isTransformed},getQueryFilters(){},async fetchCommanders(){this.loading=!0;try{let e="";const n=Object.entries(this.selectedColors).filter((([e,n])=>n)).map((([e])=>e)).join("");if(n){const o=this.selectedColors.c?"":"%20-id=c";e=`%20(id<=${n}${o})`}let o="";"any"!==this.selectedRarity&&(o=`%20rarity:${this.selectedRarity}`);const t=`${e}${o}`,a=[];for(let c=0;c<this.commanderCount;c++){const e=await this.fetchRandomCommander(t);a.push(e)}const r=a.filter((e=>e.keywords&&e.keywords.includes("Partner")&&!e.keywords.includes("Partner with"))).length;if(1===r){const e=await this.fetchRandomPartner(o);a.push(e)}const s=a.filter((e=>e.keywords&&e.keywords.includes("Choose a background"))).length;if(s>0){const e=await this.fetchRandomBackground(o);a.push(e)}this.commanders=a,this.loading=!1}catch(e){console.error("Error fetching commanders:",e),this.loading=!1}},async ensureDelay(e){const n=Date.now(),o=n-this.lastApiCallTime,t=Math.max(0,e-o);t>0&&await new Promise((e=>setTimeout(e,t))),this.lastApiCallTime=Date.now()},async fetchRandom(e){await this.ensureDelay(100);const n=await fetch(`https://api.scryfall.com/cards/random?q=${e}%20game:paper`),o=await n.json();return o},async fetchRandomCommander(e){return this.fetchRandom(`is:commander%20-t:background${e}`)},async fetchRandomPartner(e){return this.fetchRandom(`o:/^partner$/${e}`)},async fetchRandomBackground(e){return this.fetchRandom(`t:background${e}`)},getImageUrl(e){return e.image_uris?.normal?e.image_uris.normal:e.card_faces&&e.card_faces.length>1?e.isTransformed?e.card_faces[1].image_uris.normal:e.card_faces[0].image_uris.normal:"https://via.placeholder.com/400x600"},async generateImage(){const e=this.$refs.canvas,n=e.getContext("2d"),o=3,t=this.commanders.length,a=Math.ceil(t/o),r=400,s=600;e.width=o*r,e.height=a*s;const c=document.querySelectorAll(".commander-img");let l=0;for(const i of c){await new Promise((e=>{i.complete?e():i.onload=e}));const e=l%o*r,t=Math.floor(l/o)*s;n.drawImage(i,e,t,r,s),l++}this.downloadImage(e)},downloadImage(e){const n=document.createElement("a");n.href=e.toDataURL(),n.download="commanders_image.png",n.click()}}},V=o(1241);const Q=(0,V.A)(P,[["render",A],["__scopeId","data-v-176241f4"]]);var W=Q,F={name:"App",components:{CommanderList:W}};const H=(0,V.A)(F,[["render",s]]);var D=H;(0,t.Ef)(D).mount("#app")}},n={};function o(t){var a=n[t];if(void 0!==a)return a.exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(n,t,a,r){if(!t){var s=1/0;for(d=0;d<e.length;d++){t=e[d][0],a=e[d][1],r=e[d][2];for(var c=!0,l=0;l<t.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((function(e){return o.O[e](t[l])}))?t.splice(l--,1):(c=!1,r<s&&(s=r));if(c){e.splice(d--,1);var i=a();void 0!==i&&(n=i)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,a,r]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};o.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,r,s=t[0],c=t[1],l=t[2],i=0;if(s.some((function(n){return 0!==e[n]}))){for(a in c)o.o(c,a)&&(o.m[a]=c[a]);if(l)var d=l(o)}for(n&&n(t);i<s.length;i++)r=s[i],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},t=self["webpackChunkrando_commando"]=self["webpackChunkrando_commando"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(8467)}));t=o.O(t)})();
//# sourceMappingURL=app.585e44aa.js.map